# This script starts up the Homa module and configures it for the
# local system. If Homa was previously installed, it is uninstalled.

sudo ip link set ens1f1 mtu 1500
sudo ip link set vlan279 mtu 1500
sudo rmmod homa
sudo insmod homa.ko
sudo sysctl /net/homa/link_mbps=25000
sudo sysctl /net/homa/max_nic_queue_ns=10000
sudo sysctl /net/homa/rtt_bytes=50000
sudo sysctl /net/homa/grant_increment=10000
sudo sysctl /net/homa/verbose=1
# sudo sysctl /net/homa/pipeline_xmit=1
sudo cpupower frequency-set -g performance
sudo ethtool -C ens1f1 adaptive-rx off rx-usecs 0 rx-frames 1
